#!/usr/bin/make -f

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

clean:
	dh_testdir
	dh_clean

	# Run sanity checks if in a git repo
	if [ -d .git ] ; then \
		$(MAKE) check ; \
	fi

export DH_OPTIONS

install-linux-%: PACKAGE = linux-$*
install-linux-%: DH_OPTIONS = -p$(PACKAGE)
install-linux-%:
	dh_testdir
	dh_testroot
	dh_prep

	# Install firmware files
	debian/scripts/install-firmware $(PACKAGE)

	dh_installchangelogs
	dh_installdocs
	dh_compress
	dh_fixperms
	dh_installdeb
	dh_gencontrol
	dh_md5sums
	dh_builddeb

install-arch: install-linux-firmware

install-indep:

install: install-arch install-indep

binary-arch: install-arch

binary-indep: install-indep

binary: binary-arch binary-indep

# There's nothing to build
build-indep:
build-arch:
build:
